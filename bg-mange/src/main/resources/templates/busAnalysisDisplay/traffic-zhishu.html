<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,height=device-height, minimum-scale=1.0, maximum-scale=1.0">
    <title>交通指数</title>
    <link rel="stylesheet" type="text/css" th:href="@{/static/busAnalysisDisplay/css/style.css}" />
    <script  th:src="@{/static/busAnalysisDisplay/js/jquery-1.11.1.min.js}"></script>
    <script type="text/javascript">
        (function(){
            function sizeHtml(){
                window.mtSizeBase = $(window).width()/32;
                //window.mtSizeBase = window.mtSizeBase>45?45:window.mtSizeBase;
                $("html").css("font-size",window.mtSizeBase+"px");
            }
            sizeHtml();
            $(window).resize(function(){
                setTimeout(function(){
                    sizeHtml();
                },300);
            });
        })();

    </script>
</head>
<body class="common-bg" style="overflow:hidden;">
    <h3 class="head-img"></h3> 
    <div class="content-body">
        <div class="nav-crosswise">
            <div class="nav-crosswise-main c-fff"><span>当前位置</span>><span>数据分析</span>><span>公交运行</span>><span>交通指数</span></div>
        </div>
        <div class="main-area clearfix">
            <div class="lengthways-nav fl" id="side-menu">
                <div class="map-show-nav selected">
                    <ul>
                        <li>
                            <span class="J_menuItem"><img th:src="@{/static/busAnalysisDisplay/images/quan.png}">地图展示</span>
                            <ul>
                                <li><a href="traffic-monitoring.html" th:href="@{/page/passengerFlowMonitor}">客流监控</a></li>
                                <li><a href="car-monitoring.html" th:href="@{/page/busMonitor}">车辆监控</a></li>
                                <li><a href="car-transfer.html" th:href="@{/page/busTransform}">车辆换乘</a></li>
                                <li><a href="od-fenbu.html" th:href="@{/page/regionODDistri}">区域OD分布</a></li>
                                <li><a href="alarm-msg.html" th:href="@{/page/alarmMsg}">报警信息</a></li>
                            </ul>
                        </li>
                        <li  class="active">
                            <span class="J_menuItem"><img th:src="@{/static/busAnalysisDisplay/images/quan.png}">数据分析</span>
                            <ul>
                                <li>
                                    <span class="J_menuItem">公交客运</span>
                                    <ul>
                                        <li><a href="passenger-form.html" th:href="@{/page/passenVolumeCons}">客运量构成</a></li>
                                        <li><a href="brush-card-number.html" th:href="@{/page/swingCardVolumeStati}">刷卡量统计</a></li>
                                    </ul>
                                </li>
                                <li class="active">
                                    <span class="J_menuItem">公交运行</span>
                                    <ul>
                                        <li><a href="gaofeng-chart.html" th:href="@{/page/peakRun}">高峰运行图</a></li>
                                        <li><a href="running-speed-chart.html" th:href="@{/page/runSpeedStati}">运行速度统计</a></li>
                                        <li><a class="on">交通指数</a></li>
                                        <li><a href="traffic-routes.html" th:href="@{/page/congestionRoad}">拥堵路段</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <span class="J_menuItem">换乘分析</span>
                                    <ul>
                                        <li><a href="transfer-form.html" th:href="@{/page/transChangeCons}">换乘量构成</a></li>
                                        <li><a href="transfer-tongji.html" th:href="@{/page/transChangeStati}">换乘量统计</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                
            </div>
            <div class="map-area fr " id="content">
                <div class="data-area real-time-chart">
                    <div class="traffic-index real-time-case">
                        <h3>实时全市交通指数</h3>
                        <ul class="clearfix">
                            <li>
                                <div class="circle-out serious-out">
                                    <div class="circle-inner serious-inner c-fff">
                                        <p>8.8</p>严重拥堵
                                    </div>
                                </div>
                                <div class="site-speed">
                                    <p class="c-fff">广州市中心市区</p>
                                    <span>24.6km/h</span>
                                </div>
                            </li>
                            <li>
                                <div class="circle-out serious-out">
                                    <div class="circle-inner serious-inner c-fff">
                                        <p>8.9</p>严重拥堵
                                    </div>
                                </div>
                                <div class="site-speed">
                                    <p class="c-fff">天河区</p>
                                    <span>24.6km/h</span>
                                </div>
                            </li>
                            <li>
                                <div class="circle-out moderate-out">
                                    <div class="circle-inner moderate-inner c-fff">
                                        <p>6.5</p>严重拥堵
                                    </div>
                                </div>
                                <div class="site-speed">
                                    <p class="c-fff">越秀区</p>
                                    <span>24.6km/h</span>
                                </div>
                            </li>
                            <li>
                                <div class="circle-out moderate-out">
                                    <div class="circle-inner moderate-inner c-fff">
                                        <p>6.2</p>严重拥堵
                                    </div>
                                </div>
                                <div class="site-speed">
                                    <p class="c-fff">海珠区</p>
                                    <span>24.6km/h</span>
                                </div>
                            </li>
                            <li>
                                <div class="circle-out unblocked-out">
                                    <div class="circle-inner unblocked-inner c-fff">
                                        <p>2</p>畅通
                                    </div>
                                </div>
                                <div class="site-speed">
                                    <p class="c-fff">白云区</p>
                                    <span>24.6km/h</span>
                                </div>
                            </li>
                            <li>
                                <div class="circle-out unblocked-out">
                                    <div class="circle-inner unblocked-inner c-fff">
                                        <p>3</p>畅通
                                    </div>
                                </div>
                                <div class="site-speed">
                                    <p class="c-fff">番禺区</p>
                                    <span>24.6km/h</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="traffic-index all-day-case">
                        <h3>24小时交通指数</h3>
                        <div class="all-day-index" style="position: relative">
                            <!--<img src="images/all-day.png" />-->
                            <div id="trafficNumChart" class="chartStyle"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>

<script type="text/javascript" th:replace="common/fragment :: commonVar"></script>
<script type="text/javascript" th:src="@{/static/js/echarts/echarts.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/ticcCommon.js}"></script>
<script type="text/javascript">

    //页面的
    $(function(){
        var body = (document.compatMode && document.compatMode.toLowerCase() == "css1compat") ? document.documentElement : document.body;

        function ResizeTable() {
            var sideWidth = document.getElementById("side-menu");
            var con = document.getElementById('content');

            sideWidth.style.height = '' + Math.max((body.clientHeight - 100), 0) + "px";
            con.style.height = '' + Math.max((body.clientHeight - 100), 0) + "px";
            con.style.width = '' + Math.max((body.clientWidth - 180), 0) + "px";


           
        }
        ResizeTable();

        $(window).resize(function () {
            ResizeTable()
        });

        var $item = $(".J_menuItem");
        $item.on("click",function(){
            var $this = $(this);
            $this.siblings("ul").slideToggle(300);
            $this.parent("li").siblings("li").find("ul").slideUp(300);
            $this.parent("li").addClass("active").siblings("li").removeClass("active");
        })




    })
    
    //业务相关
    $(function () {
        // 基于准备好的dom，初始化echarts实例
        var trafficNumChart = echarts.init(document.getElementById('trafficNumChart'));

        var color = '#085682';
        var scale = 1;
        // 指定图表的配置项和数据
        var trafficNumChartOption = {
            title: {
                show:false,
                left: 'center',
                text: '成绩趋势走向图',
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    animation: false
                }
            },
            legend: {
                top:-5,
                right:35,
                data: ['当日拥堵指数','昨日拥堵指数','上周拥堵指数'],
                textStyle: {
                    color: '#ffffff',
                },
//                x: 'right'
            },
            axisPointer: {
                link: {
                    xAxisIndex: 'all'
                }
            },
//            dataZoom: {
//                show: true,
//                realtime: true,
//                height:20,
//                start: 40,
//                end: 60,
//                xAxisIndex: [0, 1],
//                // 相对位置，放置在容器正中间
//            },
            dataZoom: [{
                backgroundColor: 'rgba(255,255,255,0.2)', // 背景
                show: true,
                height: 20,
                xAxisIndex: [0, 1],
                bottom: 0,
                start: 40,
                end: 60,
//                handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
//                handleSize: '110%',
                handleStyle:{
                    // color:"#d3dee5"
                    color:"#0C489C"
                },
                textStyle:{color:'#ffffff'},
                borderColor:"#0F1A32"
            }, {
                type: "inside",
                show: true,
                height: 15,
                start: 1,
                end: 35
            }],
            grid: [{
                top:20,
                bottom: 50,
                left: 40,
                right: 40
            }, {
                top:20,
                bottom: 50,
                left: 40,
                right: 40
            }],
            xAxis: [{
                type: 'category',
                boundaryGap: true,
                axisLine: {
                    onZero: true
                },
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: '#000',
                        // color: 'rgba(255,255,255,1)',
                        width: 1
                    }
                },
                axisLabel: {
                    textStyle: {
                        color: color,
                        fontSize: 16 * scale
                    },
                },
                data: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19','20', '21', '22','23']
            }, {
                gridIndex: 1,
            }],
            yAxis: [{
                type: 'value',
                max: 10,
                // name: '指数',
                min: 0,
                interval: 2,
                splitLine: {
                    show: true,
                    lineStyle: {
                        // color: '#fcc',
                        width: 2
                    }
                },
                axisLabel: {
                    textStyle: {
                        color: color,
                        fontSize: 16 * scale
                    },
                }
            }, {
                gridIndex: 1
            }],
            series: [{
                type: 'line',
                markArea: {
                    data: [
                        [{
                            yAxis: 10,
                            itemStyle: {
                                normal: {
                                    // color: 'rgba(183,234,209,0.7)'
                                    color: 'rgba(195,68,31,0.9)'
                                }
                            }
                        }, {
                            yAxis: 8
                        }],
                        [{
                            yAxis: 8,
                            itemStyle: {
                                normal: {
                                    // color: 'rgba(175,214,254,0.7)'
                                    color: 'rgba(212,122,33,0.9)'
                                }
                            }
                        }, {
                            yAxis: 6
                        }],
                        [{
                            yAxis: 6,
                            itemStyle: {
                                normal: {
                                    // color: 'rgba(183,226,234,0.7)'
                                    color: 'rgba(231,163,33,0.9)'
                                    // color: 'rgba(231,163,33，0.9)'
                                }
                            }
                        }, {
                            yAxis: 4
                        }],
                        [{
                            yAxis: 4,
                            itemStyle: {
                                normal: {
                                    // color: 'rgba(244,228,199,0.7)'
                                    color: 'rgba(160,189,29,0.9)'
                                }
                            }
                        }, {
                            yAxis: 2
                        }],
                        [{
                            // name: 'E',
                            yAxis: 2,
                            itemStyle: {
                                normal: {
                                    // color: 'rgba(254,231,219,0.7)'
                                    color: 'rgba(122,156,41,0.9)'
                                }
                            }
                        }, {
                            yAxis: 0
                        }]
                    ]
                },
            },{
                name: '当日拥堵指数',
                type: 'line',
                smooth: true,
                itemStyle: {
                    normal: {
                        color: '#2dbeff'
                    }
                },
//                markArea: {
//                    data: [
//                        [{
//                            yAxis: 10,
//                            itemStyle: {
//                                normal: {
//                                    // color: 'rgba(183,234,209,0.7)'
//                                    color: 'rgba(195,68,31,0.9)'
//                                }
//                            }
//                        }, {
//                            yAxis: 8
//                        }],
//                        [{
//                            yAxis: 8,
//                            itemStyle: {
//                                normal: {
//                                    // color: 'rgba(175,214,254,0.7)'
//                                    color: 'rgba(212,122,33,0.9)'
//                                }
//                            }
//                        }, {
//                            yAxis: 6
//                        }],
//                        [{
//                            yAxis: 6,
//                            itemStyle: {
//                                normal: {
//                                    // color: 'rgba(183,226,234,0.7)'
//                                    color: 'rgba(231,163,33,0.9)'
//                                    // color: 'rgba(231,163,33，0.9)'
//                                }
//                            }
//                        }, {
//                            yAxis: 4
//                        }],
//                        [{
//                            yAxis: 4,
//                            itemStyle: {
//                                normal: {
//                                    // color: 'rgba(244,228,199,0.7)'
//                                    color: 'rgba(160,189,29,0.9)'
//                                }
//                            }
//                        }, {
//                            yAxis: 2
//                        }],
//                        [{
//                            // name: 'E',
//                            yAxis: 2,
//                            itemStyle: {
//                                normal: {
//                                    // color: 'rgba(254,231,219,0.7)'
//                                    color: 'rgba(122,156,41,0.9)'
//                                }
//                            }
//                        }, {
//                            yAxis: 0
//                        }]
//                    ]
//                },
                data: [7, 4, 1, 8, 4, 5, 2, 4, 7, 4, 1, 8, 4, 5, 2, 4, 7, 4, 1, 8, 4, 5, 2, 4]
            },  {
                name: '昨日拥堵指数',
                type: 'line',
                smooth: true,
                itemStyle: {
                    normal: {
                        color: '#ff62a3'
                    }
                },
                data: [ 8, 4, 5, 2, 4, 7, 4, 1, 8, 4, 5, 2, 4, 7, 4, 1, 8, 4, 5, 2, 4, 7, 4, 1]
            }, {
                name: '上周拥堵指数',
                type: 'line',
                smooth: true,
                itemStyle: {
                    normal: {
                        color: '#23ca55'
                    }
                },
                data: [ 5, 2, 4, 7, 4, 1, 8, 4, 5, 2, 4, 7, 4, 1, 8, 4, 5, 2, 4, 7, 4, 1, 8, 4]
            }]
        };
        // 使用刚指定的配置项和数据显示图表。
        trafficNumChart.setOption(trafficNumChartOption);
    });
</script>
</html>